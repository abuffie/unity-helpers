using UnityEngine;

/// <summary>
///  Easy singleton helper
///  to use extend script with your scripts type : MonoSingleton<MyClassName> {
///  then be sure to call the base awake in your script's awake like so
///
///  private void Awake(){
///     base.Awake();
///     your code ...
///  }
/// Also if you dont want the instance to destroy pass true in awake like -> base.Awake(true);
/// /// </summary>
namespace Pixelakes {

	public class MonoSingleton<T> : MonoBehaviour where T : Object {


		/// <summary>
		/// The instance
		/// </summary>
		/// <value></value>
		public static T i {get; private set;}
		
		protected void Awake(bool presist = false, bool destroyCompnent=false ) {
            // if not created yet then cache it
			if (i == null) {
				i = this as T;
            // destroy the newest one
			} else if (i != this) {
                if(destroyCompnent){// destroy just this script or the whole game object
                    Destroy(this); 
                }else{
                    Destroy(gameObject); 
                }				
				return;
			}
			if (presist) { DontDestroyOnLoad(gameObject); }
		}
	}
}
